<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç¬¬ä¸‰èª²ãƒ»ç·´ç¿’ä¸‰ï¼šé–±è®€ç†è§£</title>
  <style>
    :root{
      /* Lesson 3 â€“ æ·±è—ï¼ˆæ¯”ç¬¬äºŒèª²å†æ·±ï¼‰ */
      --card:#ffffff;
      --bg:#7fa3c6;
      --bg2:#5f89b2;
      --ink:#050f1c;
      --muted:#1f3448;
      --brand:#1e293b;
      --accent:#082f49;
      --line:#557fa3;
      --soft:#c5d9ea;
      --good:#16a34a;
      --bad:#dc2626;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Noto Sans TC", "Microsoft JhengHei", sans-serif;
      background: linear-gradient(180deg, var(--bg2), var(--bg));
      color: var(--ink);
    }
    .wrap{ max-width: 980px; margin:0 auto; padding: 20px; }

    .header{
      display:flex; align-items:flex-start; justify-content:space-between;
      gap:12px; flex-wrap:wrap; margin-bottom:14px;
    }
    .title{
      font-size:26px; font-weight:950; margin:0;
      display:flex; flex-direction:column; gap:6px;
    }
    .subtitle{
      font-size:15px; font-weight:800; color:var(--muted); line-height:1.5; margin:0;
    }
    .stats{ display:flex; gap:10px; flex-wrap:wrap; }
    .pill{
      background:#f1f5f9; border:1px solid var(--line);
      padding:6px 10px; border-radius:999px;
      font-weight:900; color:#0b2239;
    }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:20px;
      padding:18px;
      box-shadow:0 16px 40px rgba(2,48,96,.28);
    }

    .tag{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 12px;
      border-radius:999px;
      background:#f1f5f9;
      border:1px solid var(--line);
      font-weight:900;
      color:var(--accent);
      margin-bottom:10px;
    }

    .reading{
      border:1px solid var(--line);
      border-radius:16px;
      background:var(--soft);
      padding:14px;
      font-weight:850;
      line-height:1.75;
      margin-bottom:14px;
    }
    .reading p{ margin:0 0 10px; }
    .reading p:last-child{ margin-bottom:0; }

    .qno{ color:var(--accent); font-weight:950; }
    .question{
      font-size:18px;
      font-weight:950;
      margin:10px 0 12px;
      line-height:1.45;
    }

    .options{ display:grid; gap:10px; }

    button.opt{
      width:100%;
      text-align:left;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid var(--line);
      background:#fff;
      cursor:pointer;
      font-size:16px;
      font-weight:900;
      display:flex;
      gap:10px;
      align-items:flex-start;
      transition: transform .05s ease, border-color .2s ease, background .2s ease;
    }
    button.opt:hover{ border-color:#93c5fd; background:#f8fafc; }
    button.opt:active{ transform: scale(0.99); }
    button.opt:disabled{ opacity:.92; cursor:not-allowed; }

    .key{
      width:30px; height:30px;
      border-radius:10px;
      border:1px solid var(--line);
      background:#f1f5f9;
      display:grid; place-items:center;
      font-weight:950;
      flex:0 0 auto;
      margin-top:1px;
    }

    .feedback{
      margin-top:12px;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid var(--line);
      background:var(--soft);
      display:none;
      font-weight:950;
      white-space:pre-line;
      line-height:1.45;
    }
    .feedback.ok{ display:block; background:#f0fdf4; color:#166534; border-color:#bbf7d0; }
    .feedback.no{ display:block; background:#fef2f2; color:#991b1b; border-color:#fecaca; }
    .feedback.info{ display:block; background:#eff6ff; color:#0b3a66; border-color:#bfdbfe; }

    .actions{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .btn{
      padding:12px 16px;
      border-radius:14px;
      border:1px solid var(--line);
      background:var(--brand);
      color:#fff;
      font-weight:950;
      cursor:pointer;
    }
    .btn.secondary{ background:#fff; color:var(--brand); }
    .btn:disabled{ opacity:.55; cursor:not-allowed; }

    @media (max-width:600px){
      .wrap{ padding:14px; }
      button.opt{ font-size:18px; padding:18px 16px; }
      .key{ width:38px; height:38px; font-size:16px; }
      .btn{ width:100%; }
      .actions{ justify-content:stretch; }
      .title{ font-size:24px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="header">
      <div class="title">
        ç¬¬ä¸‰èª²ãƒ»ç·´ç¿’ä¸‰ï¼šé–±è®€ç†è§£
        <div class="subtitle">
          é–±è®€çŸ­æ–‡å¾Œï¼Œé¸å‡ºæ­£ç¢ºç­”æ¡ˆã€‚<br>
          <span style="font-size:13px; color:#314e68;">
            Read the passage and choose the correct answer.
          </span>
        </div>
      </div>

      <div class="stats">
        <span class="pill">åˆ†æ•¸ï¼š<span id="score">0</span></span>
        <span class="pill">é€²åº¦ï¼š<span id="progress">0/0</span></span>
      </div>
    </div>

    <div class="card" id="card"></div>
  </div>

<script>
  const PASSAGE = [
    "å»å¹´å¤å¤©ï¼Œæ‘å­é‡åˆ°æ—±å­£ã€‚å¾ˆä¹…æ²’æœ‰ä¸‹é›¨ï¼Œæ²³æ°´è®Šå°‘ï¼Œè¾²ä½œç‰©éƒ½å¿«æ¯æ­»äº†ã€‚",
    "é€™ä¸åªç”Ÿæ´»æœ‰å›°é›£ï¼Œä¹Ÿé—œä¿‚åˆ°ç”Ÿå‘½ã€‚æœ‰äº›äººé–‹å§‹å¤±å»å¸Œæœ›ï¼Œä½†é˜¿å±±æ²’æ”¾æ£„ã€‚ä»–ç›¸ä¿¡åªè¦å¤§å®¶åœ˜çµï¼Œå°±ä¸€å®šèƒ½æ‰¾åˆ°æ–¹æ³•ã€‚",
    "é˜¿å±±å¸¶å¤§å®¶æ•´ç†æ°´æºï¼Œä¸¦å¹«åŠ©è€äººå’Œå­©å­ã€‚é€™çµ¦æ‘å­å¸¶ä¾†å¸Œæœ›ã€‚è‹¥æ²’æœ‰ä»–ï¼Œæƒ…æ³æœƒæ›´ç³Ÿã€‚æœ€å¾Œæ‘æ°‘æˆåŠŸæ‹¯æ•‘äº†è‡ªå·±çš„å®¶ã€‚"
  ];

  const QUESTIONS = [
    {
      q: "æ‘å­é‡åˆ°çš„ä¸»è¦å•é¡Œæ˜¯ä»€éº¼ï¼Ÿ",
      options: [
        { text:"ä¸‹é›¨å¤ªå¤š", correct:false },
        { text:"æ—±å­£å¤ªé•·", correct:true },
        { text:"äººå£å¤ªå°‘", correct:false },
        { text:"é£Ÿç‰©å¤ªå¤š", correct:false }
      ],
      explain: "çŸ­æ–‡ç¬¬ä¸€æ®µèªªã€Œå¾ˆä¹…æ²’æœ‰ä¸‹é›¨ï¼Œæ²³æ°´è®Šå°‘ã€ï¼Œå±¬æ–¼æ—±å­£å•é¡Œã€‚"
    },
    {
      q: "é˜¿å±±ç‚ºä»€éº¼å¾ˆé‡è¦ï¼Ÿ",
      options: [
        { text:"ä»–å¾ˆæœ‰éŒ¢", correct:false },
        { text:"ä»–è¦å°±æ¥­", correct:false },
        { text:"ä»–é›¢é–‹æ‘å­", correct:false },
        { text:"ä»–å¸¶å¤§å®¶æ‰¾æ°´", correct:true }
      ],
      explain: "çŸ­æ–‡ç¬¬ä¸‰æ®µèªªé˜¿å±±å¸¶å¤§å®¶æ•´ç†æ°´æºï¼Œå¹«åŠ©æ‘å­åº¦éå›°é›£ã€‚"
    }
  ];

  let idx = 0;
  let score = 0;
  let locked = false;

  const card = document.getElementById("card");
  const scoreEl = document.getElementById("score");
  const progressEl = document.getElementById("progress");

  function shuffle(arr){
    const a = arr.slice();
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function renderStart(){
    progressEl.textContent = `0/${QUESTIONS.length}`;
    card.innerHTML = `
      <div class="tag">é–±è®€çŸ­æ–‡</div>
      <div class="reading">
        ${PASSAGE.map(p=>`<p>${p}</p>`).join("")}
      </div>
      <div class="actions" style="justify-content:flex-end;">
        <button class="btn" id="startBtn">é–‹å§‹ä½œç­”</button>
      </div>
      <div class="feedback info">
        æé†’ï¼šæ¯é¡Œé¸é …æœƒæ´—ç‰Œï¼›ç­”å®Œæœƒå‡ºç¾è§£é‡‹ï¼Œå¹«ä½ è‡ªæˆ‘æª¢æŸ¥ã€‚
      </div>
    `;
    document.getElementById("startBtn").onclick = () => {
      idx = 0;
      renderQuestion();
    };
  }

  function renderQuestion(){
    locked = false;

    const q = QUESTIONS[idx];
    const qno = idx + 1;
    progressEl.textContent = `${qno}/${QUESTIONS.length}`;

    const opts = shuffle(q.options);
    const keys = ["A","B","C","D"];

    card.innerHTML = `
      <div class="tag">é¸æ“‡é¡Œ</div>
      <div class="qno">ç¬¬ ${qno} é¡Œ</div>
      <div class="question">${q.q}</div>

      <div class="options">
        ${opts.map((o,i)=>`
          <button class="opt" data-correct="${o.correct}">
            <span class="key">${keys[i]}</span>
            <span>${o.text}</span>
          </button>
        `).join("")}
      </div>

      <div id="feedback" class="feedback"></div>

      <div class="actions">
        <button class="btn secondary" id="backBtn">å›åˆ°çŸ­æ–‡</button>
        <button class="btn" id="nextBtn" disabled>${qno === QUESTIONS.length ? "å®Œæˆ" : "ä¸‹ä¸€é¡Œ"}</button>
      </div>
    `;

    const fb = document.getElementById("feedback");
    const nextBtn = document.getElementById("nextBtn");

    // é¸é …é»æ“Š
    document.querySelectorAll(".opt").forEach(btn=>{
      btn.onclick = ()=>{
        if(locked) return;
        locked = true;

        const ok = btn.dataset.correct === "true";
        if(ok){
          score++;
          scoreEl.textContent = score;
          fb.className = "feedback ok";
          fb.textContent = "âœ… ç­”å°äº†ï¼\n" + q.explain;
        }else{
          fb.className = "feedback no";
          fb.textContent = "âŒ ç­”éŒ¯äº†ã€‚\n" + q.explain;
        }

        // ç¦ç”¨å…¨éƒ¨
        document.querySelectorAll(".opt").forEach(b=>b.disabled=true);
        // æ¨™å‡ºæ­£ç¢ºé¸é …é‚Šæ¡†
        document.querySelectorAll(".opt").forEach(b=>{
          if(b.dataset.correct === "true") b.style.borderColor = "var(--good)";
        });

        nextBtn.disabled = false;
      };
    });

    document.getElementById("backBtn").onclick = renderStart;

    nextBtn.onclick = () => {
      if(idx < QUESTIONS.length - 1){
        idx++;
        renderQuestion();
      }else{
        renderEnd();
      }
    };
  }

  function renderEnd(){
    progressEl.textContent = `${QUESTIONS.length}/${QUESTIONS.length}`;
    card.innerHTML = `
      <div class="tag">å®Œæˆ</div>
      <div class="reading" style="background:#f0fdf4; border-color:#bbf7d0;">
        ğŸ‰ ä½ å®Œæˆç¬¬ä¸‰èª²ç·´ç¿’ä¸‰ï¼<br>
        å¾—åˆ†ï¼š<b style="color:#166534;">${score}</b> / ${QUESTIONS.length}
      </div>

      <div class="actions">
        <button class="btn secondary" id="restartBtn">å†åšä¸€æ¬¡</button>
        <button class="btn" id="reviewBtn">å›åˆ°çŸ­æ–‡</button>
      </div>
    `;
    document.getElementById("restartBtn").onclick = () => {
      score = 0;
      scoreEl.textContent = score;
      renderStart();
    };
    document.getElementById("reviewBtn").onclick = renderStart;
  }

  // init
  renderStart();
</script>
</body>
</html>
